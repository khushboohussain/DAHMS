{"version":3,"sources":["webpack:///./src/app/employee/profile/details/details.module.ts","webpack:///./src/app/employee/profile/details/details.page.html","webpack:///./src/app/employee/profile/details/details.page.scss","webpack:///./src/app/employee/profile/details/details.page.ts"],"names":[],"mappings":"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","file":"employee-profile-details-details-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailsPage } from './details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DetailsPage]\n})\nexport class DetailsPageModule {}\n","module.exports = \"<ion-content>\\n  <div class=\\\"main\\\">\\n    <div class=\\\"header container\\\">\\n      <ion-back-button text=\\\"\\\" defaultHref=\\\"\\\" icon=\\\"arrow-round-back\\\"></ion-back-button>\\n    </div>\\n\\n    <div class=\\\"content\\\">\\n      <div class=\\\"title container\\\">\\n        <h2>Persönliche Daten ändern</h2>\\n      </div>\\n\\n      <div class=\\\"general\\\">\\n        <form [formGroup]=\\\"form\\\">\\n          <ion-list>\\n            <!-- profile image -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">Profilbild</ion-label>\\n              <div class=\\\"profile-image container\\\">\\n                <img src=\\\"{{image || base64Image}} \\\"(click)=\\\"choosePicture()\\\" id=\\\"profileImage\\\">\\n                <input type=\\\"file\\\" (change)=\\\"upload($event)\\\" accept=\\\".png,.jpg\\\" style=\\\"visibility: hidden;\\\">\\n              </div>\\n            </ion-item>\\n\\n            <!-- name -->\\n            <div class=\\\"grid-2\\\">\\n              <!-- first name -->\\n              <ion-item lines=\\\"none\\\">\\n                <ion-label position=\\\"stacked\\\">Vorname</ion-label>\\n                <ion-input type=\\\"text\\\" clearInput autocapitalize=\\\"word\\\" formControlName=\\\"vorname\\\" autocomplete autocorrect></ion-input>\\n              </ion-item>\\n\\n              <!-- last name -->\\n              <ion-item lines=\\\"none\\\">\\n                <ion-label position=\\\"stacked\\\">Nachname</ion-label>\\n                <ion-input type=\\\"text\\\" clearInput autocapitalize=\\\"word\\\" formControlName=\\\"nachname\\\" autocomplete autocorrect></ion-input>\\n              </ion-item>\\n            </div>\\n\\n            <!-- address -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">Adresse</ion-label>\\n              <ion-input type=\\\"text\\\" clearInput formControlName=\\\"adresse\\\"></ion-input>\\n            </ion-item>\\n\\n            <!-- phone number -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">Telefonnumer</ion-label>\\n              <ion-input type=\\\"text\\\" clearInput autocapitalize=\\\"word\\\" formControlName=\\\"telefonnumer\\\" autocomplete autocorrect></ion-input>\\n            </ion-item>\\n\\n            <!-- association -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">Zugehörigkeit Hi. Orga.</ion-label>\\n              <ion-input type=\\\"text\\\" clearInput formControlName=\\\"zugehörigkeit\\\"></ion-input>\\n            </ion-item>\\n\\n            <!-- max. work radius -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">Max. Einsatzradius</ion-label>\\n              <ion-select cancelText=\\\"Abbrechen\\\" okText=\\\"Fertig\\\" formControlName=\\\"Einsatzradius\\\">\\n                <ion-select-option>10km</ion-select-option>\\n                <ion-select-option>25km</ion-select-option>\\n                <ion-select-option>50km</ion-select-option>\\n              </ion-select>\\n            </ion-item>\\n\\n            <!-- email -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">E-Mail</ion-label>\\n              <ion-input type=\\\"email\\\" clearInput formControlName=\\\"email\\\"></ion-input>\\n            </ion-item>\\n\\n            <!-- password change -->\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label position=\\\"stacked\\\">Passwort</ion-label>\\n              <ion-input type=\\\"password\\\" clearInput formControlName=\\\"password\\\"></ion-input>\\n            </ion-item>\\n          </ion-list>\\n          \\n          <div class=\\\"divider\\\"></div>\\n          \\n          <div class=\\\"container\\\">\\n            <ion-button color=\\\"primary\\\" expand=\\\"block\\\" (click)=\\\"submit(form)\\\">Aktualisieren</ion-button>\\n          </div>\\n          \\n        </form>\\n      </div>\\n      \\n    </div>\\n  </div>\\n</ion-content>\"","module.exports = \".profile-image {\\n  margin-bottom: 12px;\\n  width: 100%; }\\n  .profile-image img {\\n    -o-object-fit: cover;\\n       object-fit: cover;\\n    height: 124px;\\n    width: 124px;\\n    max-width: unset;\\n    border-radius: 100%; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZW1wbG95ZWUvcHJvZmlsZS9kZXRhaWxzL0Q6XFxLb2RlQWxwaGFcXFdvcmtzcGFjZVxcUHJvamVjdHNcXERBSE1TXFxUZXN0XFxTYWFkL3NyY1xcYXBwXFxlbXBsb3llZVxccHJvZmlsZVxcZGV0YWlsc1xcZGV0YWlscy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxtQkFBbUI7RUFDbkIsV0FBVyxFQUFBO0VBRmI7SUFLSSxvQkFBaUI7T0FBakIsaUJBQWlCO0lBQ2pCLGFBQWE7SUFDYixZQUFZO0lBQ1osZ0JBQWdCO0lBQ2hCLG1CQUFtQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvZW1wbG95ZWUvcHJvZmlsZS9kZXRhaWxzL2RldGFpbHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByb2ZpbGUtaW1hZ2Uge1xuICBtYXJnaW4tYm90dG9tOiAxMnB4O1xuICB3aWR0aDogMTAwJTtcblxuICBpbWcge1xuICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgIGhlaWdodDogMTI0cHg7XG4gICAgd2lkdGg6IDEyNHB4O1xuICAgIG1heC13aWR0aDogdW5zZXQ7XG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgfVxufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ToastController, NavController } from '@ionic/angular';\nimport { HelperService } from 'src/app/services/helper.service';\nimport { AngularFireStorage, AngularFireStorageReference, AngularFireUploadTask } from '@angular/fire/storage';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ApiService } from 'src/app/services/api.service';\nimport { finalize } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-details',\n  templateUrl: './details.page.html',\n  styleUrls: ['./details.page.scss'],\n})\nexport class DetailsPage implements OnInit {\n\n  form: FormGroup;\n  base64Image;\n  image = 'assets/profile.jpg';\n  ref: AngularFireStorageReference;\n  task: AngularFireUploadTask;\n  uploadImageId;\n  data;\n  file;\n\n  constructor(public toastController: ToastController, private navController: NavController, private helper: HelperService, private fb: FormBuilder, private fireStorage: AngularFireStorage, private router: Router, private api: ApiService) {}\n\n  async update() {\n    const toast = await this.toastController.create({\n      message: 'Erfolgreich aktualisiert.',\n      position: 'top',\n      duration: 1000\n    });\n    toast.present();\n    this.navController.navigateBack('/employee/profile');\n  }\n\n  ngOnInit() {\n    // this.api.getAllEmployees();\n\n    this.form = this.fb.group({\n      email: ['', Validators.compose([\n        Validators.required,\n        Validators.email\n      ])],\n      password: ['', Validators.compose(\n        [\n          Validators.required,\n          Validators.minLength(6)\n        ])],\n      vorname: ['', Validators.required],\n      nachname: ['', Validators.required],\n      adresse: ['', Validators.required],\n      telefonnumer: ['', Validators.required],\n      zugehörigkeit: ['', Validators.required],\n      Einsatzradius: ['', Validators.required],\n      image: ['', Validators.required]\n    });\n  }\n\n  submit(form) {\n    this.data = {\n      vorname: form.value.vorname,\n      nachname: form.value.nachname,\n      email: form.value.email,\n      password: form.value.password,\n      adresse: form.value.adresse,\n      telefonnumer: form.value.telefonnumer,\n      zugehörigkeit: form.value.zugehörigkeit,\n      Einsatzradius: form.value.Einsatzradius,\n    };\n    this.uploadImage();\n  }\n\n  choosePicture() {\n    const element: HTMLElement = document.querySelector('input[type=\"file\"]') as HTMLElement;\n    element.click();\n  }\n\n  upload(event) {\n    const x: any = document.getElementById('profileImage');\n    x.src = URL.createObjectURL(event.target.files[0]);\n    this.convert(event.target.files[0]);\n  }\n\n  convert(file: File) {\n    const reader: FileReader = new FileReader();\n    reader.readAsDataURL(file);\n    try {\n      reader.onload = (): void => {\n        const base64String: string = (reader.result as string).match(\n          /.+;base64,(.+)/\n        )[1];\n        this.base64Image = base64String;\n        this.form.controls['image'].setValue(this.base64Image);\n      };\n    } catch ( e ) {\n      // no error\n    }\n  }\n\n  uploadImage() {\n    this.ref = this.fireStorage.ref(`Thumbnails/${localStorage.getItem('imgid')}`);\n    const task = this.ref.putString( 'data:image/jpeg;base64,' + this.base64Image, 'data_url');\n    task.snapshotChanges()\n      .pipe(finalize(() => {\n        this.ref.getDownloadURL().subscribe(url => {\n          this.image = url;\n          if (this.image !== '') {\n            this.data.imageURL = this.image;\n            this.updateEmplyeeData();\n          }\n        });\n      })).subscribe();\n  }\n\n  updateEmplyeeData() {\n\n    this.api.updateUser(localStorage.getItem('uid'), {\n      email: this.data.email,\n      password: this.data.password\n    }).then(res => {\n      this.api.updateEmployee(localStorage.getItem('uid'), {\n        vorname: this.data.vorname,\n        nachname: this.data.nachname,\n        adresse: this.data.adresse,\n        telefonnumer: this.data.telefonnumer,\n        zugehörigkeit: this.data.zugehörigkeit,\n        Einsatzradius: this.data.Einsatzradius,\n      })\n      .then(after => {\n        this.router.navigate(['employee/profile']);\n      });\n    });\n\n\n  }\n\n}\n"],"sourceRoot":""}